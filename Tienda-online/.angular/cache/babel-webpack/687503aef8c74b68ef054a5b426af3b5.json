{"ast":null,"code":"import _asyncToGenerator from \"D:/ProgramacionWeb/Vizzlan/Tienda-online/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nexport class SubirImagenComponent {\n  constructor(sanitizer) {\n    var _this = this;\n\n    this.sanitizer = sanitizer;\n    this.archivos = [];\n\n    this.extraerBase64 = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* ($event) {\n        return new Promise((resolve, reject) => {\n          try {\n            const unsafeImg = window.URL.createObjectURL($event);\n\n            const image = _this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\n\n            const reader = new FileReader();\n            reader.readAsDataURL($event);\n\n            reader.onload = () => {\n              resolve({\n                blob: $event,\n                image,\n                base: reader.result\n              });\n            };\n\n            reader.onerror = error => {\n              resolve({\n                base: null\n              });\n            };\n          } catch (e) {\n            return null;\n          }\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  ngOnInit() {}\n\n  capturarFile(event) {\n    const archivoCapturado = event.target.files[0];\n    this.extraerBase64(archivoCapturado).then(imagen => {\n      this.previsualizacion = imagen.base;\n      console.log(imagen);\n    });\n    this.archivos.push(archivoCapturado);\n    console.log(event.target.files);\n  }\n\n  subirArchivo() {\n    try {\n      const formularioDeDatos = new FormData();\n      this.archivos.forEach(archivo => {\n        console.log(archivo);\n        formularioDeDatos.append('files', archivo);\n      });\n      this.rest.post('http://localhost:4200/SubirImagen'), formularioDeDatos;\n      subscribe(res => {\n        console.log('Respuesta del servidor', res);\n      });\n    } catch (e) {\n      console.log('ERROR', e);\n    }\n  }\n\n}\n\nSubirImagenComponent.ɵfac = function SubirImagenComponent_Factory(t) {\n  return new (t || SubirImagenComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer));\n};\n\nSubirImagenComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SubirImagenComponent,\n  selectors: [[\"app-subir-imagen\"]],\n  decls: 8,\n  vars: 1,\n  consts: [[\"type\", \"file\", 3, \"change\"], [\"type\", \"button\", 3, \"click\"], [\"alt\", \"\", 3, \"src\"]],\n  template: function SubirImagenComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵelementStart(1, \"input\", 0);\n      i0.ɵɵlistener(\"change\", function SubirImagenComponent_Template_input_change_1_listener($event) {\n        return ctx.capturarFile($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\");\n      i0.ɵɵelementStart(3, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function SubirImagenComponent_Template_button_click_3_listener() {\n        return ctx.subirArchivo;\n      });\n      i0.ɵɵtext(4, \"Subir archivo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\");\n      i0.ɵɵtext(6, \" *ngIf = \\\"previsualizacion\\\"> \");\n      i0.ɵɵelement(7, \"img\", 2);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"src\", ctx.previsualizacion, i0.ɵɵsanitizeUrl);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzdWJpci1pbWFnZW4uY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["D:/ProgramacionWeb/Vizzlan/Tienda-online/src/app/CUS18/subir-imagen/subir-imagen.component.ts"],"names":["i0","i1","SubirImagenComponent","constructor","sanitizer","archivos","extraerBase64","$event","Promise","resolve","reject","unsafeImg","window","URL","createObjectURL","image","bypassSecurityTrustUrl","reader","FileReader","readAsDataURL","onload","blob","base","result","onerror","error","e","ngOnInit","capturarFile","event","archivoCapturado","target","files","then","imagen","previsualizacion","console","log","push","subirArchivo","formularioDeDatos","FormData","forEach","archivo","append","rest","post","subscribe","res","ɵfac","SubirImagenComponent_Factory","t","ɵɵdirectiveInject","DomSanitizer","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","SubirImagenComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","SubirImagenComponent_Template_input_change_1_listener","ɵɵelementEnd","SubirImagenComponent_Template_button_click_3_listener","ɵɵtext","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵsanitizeUrl","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/platform-browser\";\r\nexport class SubirImagenComponent {\r\n    constructor(sanitizer) {\r\n        this.sanitizer = sanitizer;\r\n        this.archivos = [];\r\n        this.extraerBase64 = async ($event) => new Promise((resolve, reject) => {\r\n            try {\r\n                const unsafeImg = window.URL.createObjectURL($event);\r\n                const image = this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL($event);\r\n                reader.onload = () => {\r\n                    resolve({\r\n                        blob: $event,\r\n                        image,\r\n                        base: reader.result\r\n                    });\r\n                };\r\n                reader.onerror = error => {\r\n                    resolve({\r\n                        base: null\r\n                    });\r\n                };\r\n            }\r\n            catch (e) {\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    capturarFile(event) {\r\n        const archivoCapturado = event.target.files[0];\r\n        this.extraerBase64(archivoCapturado).then((imagen) => {\r\n            this.previsualizacion = imagen.base;\r\n            console.log(imagen);\r\n        });\r\n        this.archivos.push(archivoCapturado);\r\n        console.log(event.target.files);\r\n    }\r\n    subirArchivo() {\r\n        try {\r\n            const formularioDeDatos = new FormData();\r\n            this.archivos.forEach(archivo => {\r\n                console.log(archivo);\r\n                formularioDeDatos.append('files', archivo);\r\n            });\r\n            this.rest.post('http://localhost:4200/SubirImagen'), formularioDeDatos;\r\n            subscribe(res => {\r\n                console.log('Respuesta del servidor', res);\r\n            });\r\n        }\r\n        catch (e) {\r\n            console.log('ERROR', e);\r\n        }\r\n    }\r\n}\r\nSubirImagenComponent.ɵfac = function SubirImagenComponent_Factory(t) { return new (t || SubirImagenComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer)); };\r\nSubirImagenComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SubirImagenComponent, selectors: [[\"app-subir-imagen\"]], decls: 8, vars: 1, consts: [[\"type\", \"file\", 3, \"change\"], [\"type\", \"button\", 3, \"click\"], [\"alt\", \"\", 3, \"src\"]], template: function SubirImagenComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\");\r\n        i0.ɵɵelementStart(1, \"input\", 0);\r\n        i0.ɵɵlistener(\"change\", function SubirImagenComponent_Template_input_change_1_listener($event) { return ctx.capturarFile($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"div\");\r\n        i0.ɵɵelementStart(3, \"button\", 1);\r\n        i0.ɵɵlistener(\"click\", function SubirImagenComponent_Template_button_click_3_listener() { return ctx.subirArchivo; });\r\n        i0.ɵɵtext(4, \"Subir archivo\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"div\");\r\n        i0.ɵɵtext(6, \" *ngIf = \\\"previsualizacion\\\"> \");\r\n        i0.ɵɵelement(7, \"img\", 2);\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(7);\r\n        i0.ɵɵproperty(\"src\", ctx.previsualizacion, i0.ɵɵsanitizeUrl);\r\n    } }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzdWJpci1pbWFnZW4uY29tcG9uZW50LnNjc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}