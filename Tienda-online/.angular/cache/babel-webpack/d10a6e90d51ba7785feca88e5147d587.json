{"ast":null,"code":"import _asyncToGenerator from \"D:/ProgramacionWeb/Vizzlan/Tienda-online/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet SubirImagenComponent = class SubirImagenComponent {\n  constructor(sanitizer, rest) {\n    var _this = this;\n\n    this.sanitizer = sanitizer;\n    this.rest = rest;\n    this.archivos = [];\n\n    this.extraerBase64 = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* ($event) {\n        return new Promise((resolve, reject) => {\n          try {\n            const unsafeImg = window.URL.createObjectURL($event);\n\n            const image = _this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\n\n            const reader = new FileReader();\n            reader.readAsDataURL($event);\n\n            reader.onload = () => {\n              resolve({\n                base: reader.result\n              });\n            };\n\n            reader.onerror = error => {\n              resolve({\n                base: null\n              });\n            };\n          } catch (e) {\n            return null;\n          }\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  ngOnInit() {}\n\n  capturarFile(event) {\n    const archivoCapturado = event.target.files[0];\n    this.extraerBase64(archivoCapturado).then(imagen => {\n      this.previsualizacion = imagen.base;\n      console.log(imagen);\n    });\n    this.archivos.push(archivoCapturado); //console.log(event.target.files);\n  }\n\n  clearImage() {\n    this.previsualizacion = '';\n    this.archivos = [];\n  }\n\n  subirArchivo() {\n    try {\n      const formularioDeDatos = new FormData();\n      this.archivos.forEach(archivo => {\n        console.log(archivo);\n        formularioDeDatos.append('files', archivo);\n      });\n      this.rest.post('http://localhost:4200/SubirImagen'), formularioDeDatos;\n      subscribe(res => {\n        console.log('Respuesta del servidor', res);\n      });\n    } catch (e) {\n      console.log('ERROR', e);\n    }\n  }\n\n};\nSubirImagenComponent = __decorate([Component({\n  selector: 'app-subir-imagen',\n  templateUrl: './subir-imagen.component.html',\n  styleUrls: ['./subir-imagen.component.scss']\n})], SubirImagenComponent);\nexport { SubirImagenComponent };","map":{"version":3,"sources":["D:/ProgramacionWeb/Vizzlan/Tienda-online/src/app/CUS18/subir-imagen/subir-imagen.component.ts"],"names":["__decorate","Component","SubirImagenComponent","constructor","sanitizer","rest","archivos","extraerBase64","$event","Promise","resolve","reject","unsafeImg","window","URL","createObjectURL","image","bypassSecurityTrustUrl","reader","FileReader","readAsDataURL","onload","base","result","onerror","error","e","ngOnInit","capturarFile","event","archivoCapturado","target","files","then","imagen","previsualizacion","console","log","push","clearImage","subirArchivo","formularioDeDatos","FormData","forEach","archivo","append","post","subscribe","res","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nlet SubirImagenComponent = class SubirImagenComponent {\r\n    constructor(sanitizer, rest) {\r\n        this.sanitizer = sanitizer;\r\n        this.rest = rest;\r\n        this.archivos = [];\r\n        this.extraerBase64 = async ($event) => new Promise((resolve, reject) => {\r\n            try {\r\n                const unsafeImg = window.URL.createObjectURL($event);\r\n                const image = this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL($event);\r\n                reader.onload = () => {\r\n                    resolve({\r\n                        base: reader.result\r\n                    });\r\n                };\r\n                reader.onerror = error => {\r\n                    resolve({\r\n                        base: null\r\n                    });\r\n                };\r\n            }\r\n            catch (e) {\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    capturarFile(event) {\r\n        const archivoCapturado = event.target.files[0];\r\n        this.extraerBase64(archivoCapturado).then((imagen) => {\r\n            this.previsualizacion = imagen.base;\r\n            console.log(imagen);\r\n        });\r\n        this.archivos.push(archivoCapturado);\r\n        //console.log(event.target.files);\r\n    }\r\n    clearImage() {\r\n        this.previsualizacion = '';\r\n        this.archivos = [];\r\n    }\r\n    subirArchivo() {\r\n        try {\r\n            const formularioDeDatos = new FormData();\r\n            this.archivos.forEach(archivo => {\r\n                console.log(archivo);\r\n                formularioDeDatos.append('files', archivo);\r\n            });\r\n            this.rest.post('http://localhost:4200/SubirImagen'), formularioDeDatos;\r\n            subscribe(res => {\r\n                console.log('Respuesta del servidor', res);\r\n            });\r\n        }\r\n        catch (e) {\r\n            console.log('ERROR', e);\r\n        }\r\n    }\r\n};\r\nSubirImagenComponent = __decorate([\r\n    Component({\r\n        selector: 'app-subir-imagen',\r\n        templateUrl: './subir-imagen.component.html',\r\n        styleUrls: ['./subir-imagen.component.scss']\r\n    })\r\n], SubirImagenComponent);\r\nexport { SubirImagenComponent };\r\n"]},"metadata":{},"sourceType":"module"}